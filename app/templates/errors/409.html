{# app/templates/errors/409.html #}
{% extends "layout.html" %}

{% block content %}
<div class="container py-4" style="max-width: 980px;">
  <div class="card shadow-sm border-warning">
    <div class="card-body p-4">
      <div class="d-flex align-items-start justify-content-between gap-3 flex-wrap">
        <div>
          <h3 class="mb-1">Änderung nicht möglich</h3>
          <div class="text-muted">HTTP 409 – Konflikt</div>
        </div>
        <span class="badge text-bg-warning align-self-start">gesperrt</span>
      </div>

      <hr class="my-3">

      <div class="alert alert-warning mb-3">
        <div class="fw-semibold mb-1">Grund</div>
        <div>{{ message }}</div>
      </div>

      <div class="small text-muted mb-3">
        Pfad: <span class="font-monospace">{{ path }}</span>
      </div>

      <div class="d-flex gap-2 flex-wrap">
        {# Zurück: bevorzugt back_url (Referer), sonst history.back() #}
        {% if back_url %}
          <a class="btn btn-primary" href="{{ back_url }}">Zurück</a>
        {% else %}
          <a class="btn btn-primary" href="javascript:history.back()">Zurück</a>
        {% endif %}

        {# Übersicht/Home: kommt sicher aus web.py (home_url) #}
        <a class="btn btn-outline-secondary" href="{{ home_url }}">Übersicht</a>

        {# Optional: Turnier-Button, wenn wir auf einem Turnier-Kontext sind #}
        {% if skt_tournament_id %}
          <a class="btn btn-outline-dark"
             href="{{ url_for('tournaments.tournament_detail', tournament_id=skt_tournament_id) }}">
            Turnier
          </a>
        {% endif %}
      </div>

      <div class="mt-3 small text-muted">
        Hinweis: Wenn das Turnier abgeschlossen ist, sind schreibende Aktionen gesperrt.
        Export/Ansicht bleiben weiterhin möglich.
      </div>
    </div>
  </div>
</div>
{% endblock %}